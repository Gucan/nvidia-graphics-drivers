From f0eaf136436d88e9a706da00a3182e7ac2cac7ae Mon Sep 17 00:00:00 2001
From: Alberto Milone <alberto.milone@canonical.com>
Date: Tue, 9 Jul 2019 19:31:04 +0200
Subject: [PATCH 1/1] Kbuild: pass -fno-stack-clash-protection
 -fcf-protection=none

This is a temporary fix for (LP: #1830961)
---
 Kbuild | 1 +
 1 file changed, 1 insertion(+)

diff --git a/Kbuild b/Kbuild
index cbaf77b..7acb9bc 100644
--- a/Kbuild
+++ b/Kbuild
@@ -60,6 +60,7 @@ EXTRA_CFLAGS += -I$(src)/common/inc
 EXTRA_CFLAGS += -I$(src)
 EXTRA_CFLAGS += -Wall -MD $(DEFINES) $(INCLUDES) -Wno-cast-qual -Wno-error -Wno-format-extra-args
 EXTRA_CFLAGS += -D__KERNEL__ -DMODULE -DNVRM -DNV_VERSION_STRING=\"430.26\" -Wno-unused-function -Wuninitialized -fno-strict-aliasing -mno-red-zone -mcmodel=kernel -DNV_UVM_ENABLE
+EXTRA_CFLAGS += -fno-stack-clash-protection -fcf-protection=none
 EXTRA_CFLAGS += $(call cc-option,-Werror=undef,)
 EXTRA_CFLAGS += -DNV_SPECTRE_V2=$(NV_SPECTRE_V2)
 
-- 
2.20.1

